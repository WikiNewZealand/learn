# Figure.NZ Places

Places is a Jekyll-based website that enables people to find data about their territorial authority.

Code from this website can be shared. However, before sharing, you MUST remove:

- font files from assets
- synonyms.json

This is because of licensing requirements. Font files are only licensed to Figure.NZ and synonyms.json contains data from the New Zealand Fire Service dataset.

# Changes to labels or data

Changes to labels or data on this repo will not work as they will be overwritten by data generated by [fundamental-figures](https://github.com/WikiNewZealand/fundamental-figures). You can submit a pull request to the fundamental-figures.json file in that directory.

# Build requirements
- Install [.NET Core 2.2 SDK](https://dotnet.microsoft.com/download/dotnet-core/2.2)
- Clone [fundamental-figures](https://github.com/WikiNewZealand/fundamental-figures)

# Build and run data pipeline
1. Get latest from https://github.com/WikiNewZealand/fundamental-figures
2. Open cli in `FigureNZ.FundamentalFigures.Console` folder
3. Run `dotnet run ..\fundamental-figures.json @..\territorial-authorities.txt -t excel -t json -t csv -t yaml`
4. Copy contents of `output` folder to `find-your-place`:
    - *.csv files into `/assets/files`
    - *.xlsx files into `/assets/files`
    - *.json files into `/_data`
    - *.md files into `/_territorial_authorities`, but **do not overwrite existing .md files** as they may have been customised

# Add support files
5. Add images for each TA to `/assets/img`

# Customise TA rendering
6. Edit .md file to add `display-name`, `group`, and `nearby` as necessary

```
---
data: Auckland
display-name: Auckland
group: North Island
nearby:
    - Hamilton
    - Chatham Islands
---
```

# Deploy
7. Commit changes to `find-your-place`
